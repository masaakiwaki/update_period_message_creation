<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>保守期間ジェネレーター</h1>	

    <p>取得した値 <span id="span1"></span></p>

    <label>商品名　　：<input type="text" value="" id="item" maxlength="300" /></label>

    <br>

    <label>期間　　　：<input type="text" value="1" id="digit" maxlength="3" /></label>

    <select id="pref">
        <option value="年">年</option>
        <option value="月">月</option>
        <option value="日">日</option>
    </select>

    <br>

    <label> 保守開始日：<input type="date" id="start" value="" required></input></label>

    <input type="button" value="作成" onclick="clickBtn1()" />
    
    <script>
        function clickBtn1() {
            const digit = Number(document.getElementById("digit").value);
            const item = document.getElementById("item").value;
            const pref = document.getElementById("pref").value;
            const start = document.getElementById("start").value;
            


            let start_dt = new Date(start);
            let end_dt = new Date(start)


            if (pref === '年'){
            end_dt.setFullYear(end_dt.getFullYear() + digit);
            } else if (pref === '月'){
            end_dt.setMonth(end_dt.getMonth() + digit);
            } else if (pref === '日'){
            end_dt.setDate(end_dt.getDate() + digit);
            }

            end_dt.setDate(end_dt.getDate() - 1);

            let start_date = (start_dt.getFullYear() + '.' + Number(start_dt.getMonth() + 1) + '.' + start_dt.getDate());
            let end_date = (end_dt.getFullYear() + '.' + Number(end_dt.getMonth() + 1) + '.' + end_dt.getDate());

            let result_text = (item + ': '+ start_date + ' ～ ' + end_date);

            console.log(result_text);

            document.getElementById("span1").textContent = result_text;

            navigator.clipboard.writeText(result_text)
            .then(() => {
            console.log('成功');
            })
            .catch(err => {
            console.error('ユーザが拒否、もしくはなんらかの理由で失敗');
            });

        }
    </script>

</body>
</html>